# Auto-generated by osvbngd v0.0.4-3-g1968897-dirty
# Do not edit this header

vrfs:
  cgnat:
    address-families:                                                                                                                                                                                    
      ipv4-unicast: {}
      ipv6-unicast: {}

subscriber-groups:
    groups:
        default:
            vrf: cgnat
            vlans:
                - svlan: "100-110"
                  cvlan: any
                  interface: loop100
            address-pools:
                - name: subscriber-pool
                  network: 10.255.0.0/16
                  gateway: 10.255.0.1
                  dns:
                    - 8.8.8.8
                    - 8.8.4.4
                  priority: 1
            iana-pool: wan-link-pool
            pd-pool: subscriber-pd-pool
            dhcp:
                auto-generate: true
                lease-time: "3600"
            bgp:
                enabled: true
                advertise-pools: true
                redistribute-connected: true
            aaa-policy: default-policy
dhcp:
    provider: local
dhcpv6:
    provider: local
    iana_pools:
        - name: wan-link-pool
          network: 2001:db8:0:1::/64
          range_start: 2001:db8:0:1::1000
          range_end: 2001:db8:0:1::ffff
          gateway: 2001:db8:0:1::1
          preferred_time: 3600
          valid_time: 7200
    pd_pools:
        - name: subscriber-pd-pool
          network: 2001:db8:100::/40
          prefix_length: 56
          preferred_time: 3600
          valid_time: 7200
    dns_servers:
        - 2001:4860:4860::8888
        - 2001:4860:4860::8844
    ra:
        router_lifetime: 1800
        max_interval: 600
        min_interval: 200
interfaces:
    eth0:
        description: Management Interface
        enabled: true
        address:
            ipv4:
                - 192.168.100.10/24
            ipv6:
                - 2001:db8:100::10/64
    eth1:
        description: Access Interface
        enabled: true
        bng_mode: access
    eth2:
        description: Core Link (frr-peer)
        enabled: true
        address:
            ipv4:
                - 10.0.0.1/30
            ipv6:
                - 2001:db8:c0:e::1/64
    loop100:
        description: Subscriber Gateway Loopback
        enabled: true
        address:
            ipv4:
                - 10.255.0.1/32
            ipv6:
                - 2001:db8:0:1::1/128
        lcp: true
protocols:
    bgp:
        asn: 65000
        router-id: 10.255.0.1
    ospf:
        enabled: true
        router-id: 10.0.0.1
        log-adjacency-changes: true
        areas:
            "0.0.0.0":
                interfaces:
                    eth2:
                        network: point-to-point
    ospf6:
        enabled: true
        router-id: 10.0.0.1
        log-adjacency-changes: true
        areas:
            "0.0.0.0":
                interfaces:
                    eth2:
                        network: point-to-point
    isis:
        enabled: true
        net: "49.0001.0100.0000.0001.00"
        is-type: level-2-only
        metric-style: wide
        log-adjacency-changes: true
        interfaces:
            eth2:
                network: point-to-point
                circuit-type: level-2-only
    mpls:
        enabled: true
    ldp:
        enabled: true
        router-id: 10.0.0.1
        address-families:
            ipv4:
                transport-address: 10.0.0.1
aaa:
    auth_provider: local
    nas_identifier: osvbng
    policy:
        - name: default-policy
          format: $remote-id$
          max_concurrent_sessions: 1
plugins:
    exporter.prometheus:
        enabled: true
        listen_address: :9090
    northbound.api:
        enabled: true
        listen_address: :8080
    subscriber.auth.local:
        allow_all: true
        database_path: /tmp/osvbng.db
    subscriber.auth.http:
        endpoint: http://host.docker.internal:8081/api/v1/subscribers
        method: POST
        timeout: 30s
        # tls:
        #     insecure_skip_verify: false
        #     ca_cert_file: /etc/osvbng/ca.crt
        # auth:
        #     type: bearer
        #     token: your-api-token
        headers:
            osvbng-dev: True
        response:
            allowed_condition:
                jsonpath: status
                value: "allowed"
        accounting:
            enabled: true
            start:
                endpoint: http://host.docker.internal:8081/api/v1/subscribers/{{.AcctSessionID}}/accounting/start
            update:
                endpoint: http://host.docker.internal:8081/api/v1/subscribers/{{.AcctSessionID}}/accounting/update
            stop:
                endpoint: http://host.docker.internal:8081/api/v1/subscribers/{{.AcctSessionID}}/accounting/stop
monitoring:
  collect_interval: 30s
  disabled_collectors:
    - subscriber.sessions
    - system.dataplane.system
    - system.dataplane.memory
    - system.dataplane.interfaces
    - system.dataplane.nodes
    - system.dataplane.errors
    - system.dataplane.buffers
    - aaa.radius.servers
    - protocols.bgp.statistics
    - protocols.bgp.ipv6.statistics
    - protocols.bgp.neighbors.<*:ip>
system:                                                                                                                                                            
    cppm:                                                                                                                                                            
        dataplane:                                                                                                                                                     
            policer:                                                                                                                                                     
                dhcpv4:
                    rate: 1000
                    burst: 500
                arp:
                    rate: 1000
                    burst: 500
        controlplane:
            policer:
                dhcpv4:
                    rate: 1000
                    burst: 500
                arp:
                    rate: 1000
                    burst: 500
logging:
    format: text
    level: info
    components:
        aaa: info
        arp: info
        dataplane: debug
        ipoe: info
        pppoe: info
        southbound: info
        subscriber: info
dataplane:                                                                                                                                                         
    statseg:                                                                                                                                                         
        size: "512m"                                                                                                                                                   
        page-size: "4k"                                                                                                                                              
        per-node-counters: false